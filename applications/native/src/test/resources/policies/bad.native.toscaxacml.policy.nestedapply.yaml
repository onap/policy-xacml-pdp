tosca_definitions_version: tosca_simple_yaml_1_1_0
topology_template:
  inputs: {}
  policies:
    - nestedapply.policy.set:
        type: onap.policies.native.ToscaXacml
        type_version: 1.0.0
        properties:
          policies:
            - properties:
                description: invalid key under apply
                rules:
                  - condition:
                      apply:
                        operator: double-greater-than-or-equal
                        keys:
                          - apply:
                              operator: double-multiply
                              keys:
                                - apply:
                                    operator: double-divide
                                    keys:
                                      - applies:
                                          operator: integer-to-double
                                          keys:
                                            - input1
                                      - apply:
                                          operator: integer-to-double
                                          keys:
                                            - input2
                                - 100
                        compareWith:
                          value: 50
                    decision: Permit
                  - decision: Deny
                    advice:
                      value: this is a default rule
              metadata:
                policy-id: nestedapply.example.policy
                policy-version: 1.0.0
        name: nestedapply.policy.set
        version: 1.0.0
        metadata:
          action: check-nestedapply-policy
          description: policy set for nested apply
          policy-id: nestedapply.policy.set
          policy-version: 1.0.0
name: ToscaServiceTemplateSimple
version: 1.0.0
